(venv) dave@Garden1:~/Facial-Recognition $ python app.py

************************************************************
*                                                          *
*  Face Recognition Server with CodeProject.AI            *
*                                                          *
************************************************************

Configuration:
  CodeProject.AI: http://172.16.1.150:32168/v1
  Flask Server: http://localhost:5000

Endpoints:
  - Home:         http://localhost:5000/
  - Registration: http://localhost:5000/register
  - Recognition:  http://localhost:5000/recognize
  - Diagnostics:  http://localhost:5000/diagnostics

============================================================
[STARTUP] Testing CodeProject.AI connection...
[STARTUP] Server: http://172.16.1.150:32168/v1
[STARTUP] ✓ CodeProject.AI server is REACHABLE (status: 200)
[STARTUP] ✓ Face recognition endpoints should be available
[STARTUP]   Register: POST http://172.16.1.150:32168/v1/vision/face/register
[STARTUP]   Recognize: POST http://172.16.1.150:32168/v1/vision/face/recognize
============================================================

Starting Flask server...
Press Ctrl+C to stop

 * Serving Flask app 'app'
 * Debug mode: on
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.16.1.102:5000
Press CTRL+C to quit
 * Restarting with stat

************************************************************
*                                                          *
*  Face Recognition Server with CodeProject.AI            *
*                                                          *
************************************************************

Configuration:
  CodeProject.AI: http://172.16.1.150:32168/v1
  Flask Server: http://localhost:5000

Endpoints:
  - Home:         http://localhost:5000/
  - Registration: http://localhost:5000/register
  - Recognition:  http://localhost:5000/recognize
  - Diagnostics:  http://localhost:5000/diagnostics

============================================================
[STARTUP] Testing CodeProject.AI connection...
[STARTUP] Server: http://172.16.1.150:32168/v1
[STARTUP] ✓ CodeProject.AI server is REACHABLE (status: 200)
[STARTUP] ✓ Face recognition endpoints should be available
[STARTUP]   Register: POST http://172.16.1.150:32168/v1/vision/face/register
[STARTUP]   Recognize: POST http://172.16.1.150:32168/v1/vision/face/recognize
============================================================

Starting Flask server...
Press Ctrl+C to stop

 * Debugger is active!
 * Debugger PIN: 127-923-956

============================================================
[RECOGNIZE] New recognition request at 21:24:19
[RECOGNIZE] Base64 data length: 78408 characters
[RECOGNIZE] Original image size: 57.43 KB
[RESIZE] Image resized from (1280, 720) to (640, 360)
[RESIZE] Size reduced from 57.43KB to 25.37KB
[RECOGNIZE] Final image size: 25.37 KB
[RECOGNIZE] Sending POST to: http://172.16.1.150:32168/v1/vision/face/recognize
[RECOGNIZE] Timeout set to: 30 seconds
[RECOGNIZE] Response received in 0.05 seconds
[RECOGNIZE] Status code: 200
[RECOGNIZE] Response JSON: {'message': 'A face was recognised', 'count': 1, 'predictions': [{'confidence': 0.8231339156627655, 'userid': 'dave', 'x_min': 294, 'y_min': 178, 'x_max': 364, 'y_max': 272}], 'success': True, 'inferenceMs': 32, 'processMs': 44, 'code': 200, 'command': 'recognize', 'moduleId': 'FaceProcessing', 'executionProvider': 'CUDA', 'analysisRoundTripMs': 47}
[RECOGNIZE] Found 1 face prediction(s)
[RECOGNIZE]   Face #1: dave (confidence: 82.31%)
[RECOGNIZE] ✓ SUCCESS - Total time: 0.14s
============================================================

172.16.1.150 - - [31/Oct/2025 21:24:19] "POST /api/recognize HTTP/1.1" 200 -

============================================================
[TTS] Text-to-speech request at 21:24:19
[TTS] Text: Hello Dave, welcome!
[TTS] Generating audio with espeak (male voice)...
[TTS] Using espeak driver
[TTS] ✓ Set voice to: english-us+m3 (male, deeper)
[TTS] ✓ Audio generated: tts_4515b05c47eb.wav
[TTS] Generating simple lip sync data...
[TTS] Estimated audio duration: 1.70s (from 3 words)
[TTS] ✓ Lip sync data generated
[TTS] ✓ Viseme cues: 17
============================================================

172.16.1.150 - - [31/Oct/2025 21:24:19] "POST /api/tts HTTP/1.1" 200 -
172.16.1.150 - - [31/Oct/2025 21:24:19] "GET /audio/tts_4515b05c47eb.wav HTTP/1.1" 404 -
Exception ignored on calling ctypes callback function: <bound method EspeakDriver._onSynth of <pyttsx3.drivers.espeak.EspeakDriver object at 0x7fabe246d0>>
Traceback (most recent call last):
  File "/home/dave/Facial-Recognition/venv/lib/python3.11/site-packages/pyttsx3/drivers/espeak.py", line 171, in _onSynth
    self._proxy.notify('finished-utterance', completed=True)
    ^^^^^^^^^^^^^^^^^^
ReferenceError: weakly-referenced object no longer exists

============================================================
[RECOGNIZE] New recognition request at 21:24:21
[RECOGNIZE] Base64 data length: 78080 characters
[RECOGNIZE] Original image size: 57.19 KB
[RESIZE] Image resized from (1280, 720) to (640, 360)
[RESIZE] Size reduced from 57.19KB to 25.30KB
[RECOGNIZE] Final image size: 25.30 KB
[RECOGNIZE] Sending POST to: http://172.16.1.150:32168/v1/vision/face/recognize
[RECOGNIZE] Timeout set to: 30 seconds
[RECOGNIZE] Response received in 0.04 seconds
[RECOGNIZE] Status code: 200
[RECOGNIZE] Response JSON: {'message': 'A face was recognised', 'count': 1, 'predictions': [{'confidence': 0.8019854724407196, 'userid': 'dave', 'x_min': 293, 'y_min': 178, 'x_max': 362, 'y_max': 272}], 'success': True, 'inferenceMs': 28, 'processMs': 31, 'code': 200, 'command': 'recognize', 'moduleId': 'FaceProcessing', 'executionProvider': 'CUDA', 'analysisRoundTripMs': 33}
[RECOGNIZE] Found 1 face prediction(s)
[RECOGNIZE]   Face #1: dave (confidence: 80.20%)
[RECOGNIZE] ✓ SUCCESS - Total time: 0.11s
============================================================

172.16.1.150 - - [31/Oct/2025 21:24:22] "POST /api/recognize HTTP/1.1" 200 -

============================================================
[RECOGNIZE] New recognition request at 21:24:23
[RECOGNIZE] Base64 data length: 78056 characters
[RECOGNIZE] Original image size: 57.17 KB
[RESIZE] Image resized from (1280, 720) to (640, 360)
[RESIZE] Size reduced from 57.17KB to 25.28KB
[RECOGNIZE] Final image size: 25.28 KB
[RECOGNIZE] Sending POST to: http://172.16.1.150:32168/v1/vision/face/recognize
[RECOGNIZE] Timeout set to: 30 seconds
[RECOGNIZE] Response received in 0.04 seconds
[RECOGNIZE] Status code: 200
[RECOGNIZE] Response JSON: {'message': 'A face was recognised', 'count': 1, 'predictions': [{'confidence': 0.8376799821853638, 'userid': 'dave', 'x_min': 293, 'y_min': 178, 'x_max': 363, 'y_max': 270}], 'success': True, 'inferenceMs': 27, 'processMs': 30, 'code': 200, 'command': 'recognize', 'moduleId': 'FaceProcessing', 'executionProvider': 'CUDA', 'analysisRoundTripMs': 32}
[RECOGNIZE] Found 1 face prediction(s)
[RECOGNIZE]   Face #1: dave (confidence: 83.77%)
[RECOGNIZE] ✓ SUCCESS - Total time: 0.10s
============================================================

172.16.1.150 - - [31/Oct/2025 21:24:23] "POS